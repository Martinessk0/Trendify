<div class="container py-5">
  <div *ngIf="loading" class="text-center">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <div *ngIf="!loading && cart">
    <h2 class="mb-4 fw-bold text-center">ðŸ›’ Your Cart</h2>

    <div class="list-group">
      <div
        class="list-group-item list-group-item-light py-3 px-4 d-flex flex-column flex-md-row align-items-md-center justify-content-between border rounded mb-3 shadow-sm"
        *ngFor="let i of cart.items"
      >
        <div class="d-flex align-items-center gap-3 mb-3 mb-md-0">
          <img [src]="i.imageUrl" width="60" height="60" style="object-fit: contain;" />
          <div>
            <h5 class="mb-1">{{ i.productName }}</h5>
            <small class="text-muted">{{ i.price | currency }}</small>
          </div>
        </div>

        <div class="d-flex flex-column flex-sm-row align-items-center gap-2">
          <div class="d-flex align-items-center">
            <label class="me-2 mb-0">Qty:</label>
            <input
              type="number"
              min="1"
              class="form-control form-control-sm"
              style="width: 70px;"
              [value]="i.quantity"
              (change)="changeQty(i, $any($event.target).value)"
            />
          </div>

          <button (click)="remove(i)" class="btn btn-sm btn-outline-danger">
            <i class="bi bi-x-lg"></i> Remove
          </button>
        </div>
      </div>
    </div>

    <!-- Action buttons -->
    <div class="d-flex justify-content-between mt-4">
      <button (click)="clear()" class="btn btn-outline-secondary">
        <i class="bi bi-trash3"></i> Clear Cart
      </button>
      <a [routerLink]="['/checkout']" class="btn btn-success">
        <i class="bi bi-cart-check"></i> Checkout
      </a>
    </div>
  </div>
</div>
