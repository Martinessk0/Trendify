<!-- src/app/pages/checkout/checkout.component.html -->
<div class="container py-4">
  <h2>Checkout</h2>

  <div *ngIf="cart?.items?.length === 0" class="alert alert-info">
    Количката е празна.
  </div>

  <div *ngIf="cart?.items?.length">
    <!-- табличка с items -->
    <h5>Вашите артикули</h5>
    <table class="table">
      <tr *ngFor="let i of cart?.items">
        <td><img [src]="i.imageUrl" width="60"></td>
        <td>{{ i.productName }}</td>
        <td>{{ i.price | currency:'BGN' }}</td>
        <td>{{ i.quantity }}</td>
        <td>{{ (i.price * i.quantity) | currency:'BGN' }}</td>
      </tr>
    </table>
    <h5 class="text-end">Общо: {{ getTotal() | currency:'BGN' }}</h5>

    <!-- формата -->
    <form [formGroup]="form" (ngSubmit)="submit()">
      <!-- полета: email, fullName, phone, address -->
      <div class="mb-3">
        <label>Email</label>
        <input formControlName="email" class="form-control">
      </div>
      <div class="mb-3">
        <label>Име</label>
        <input formControlName="fullName" class="form-control">
      </div>
      <div class="mb-3">
        <label>Телефон</label>
        <input formControlName="phone" class="form-control">
      </div>
      <div class="mb-3">
        <label>Адрес</label>
        <textarea formControlName="address" class="form-control"></textarea>
      </div>

      <button class="btn btn-primary" [disabled]="loading || form.invalid">
        {{ loading ? 'Поръчвам…' : 'Поръчай' }}
      </button>
    </form>
  </div>
</div>
