<div class="container my-4" *ngIf="order">
  <div class="mb-4">
    <a routerLink="/orders" class="text-decoration-none">
      <i class="bi bi-arrow-left-circle me-1"></i> All orders
    </a>
  </div>

  <div class="card mb-4 shadow-sm border-0">
    <div class="card-header">
      <h4 class="mb-0">Order #{{ order.orderNumber }}</h4>
    </div>
    <div class="card-body row">
      <div class="col-md-4 mb-3">
        <p class="mb-1"><strong>Data:</strong></p>
        <p class="mb-0">{{ order.orderDate | date : "dd.MM.yyyy HH:mm" }}</p>
      </div>
      <div class="col-md-4 mb-3">
        <p class="mb-1"><strong>Status:</strong></p>
        <span
          class="badge"
          [ngClass]="{
            'bg-secondary': order.status === 'Pending',
            'bg-success': order.status === 'Completed',
            'bg-warning text-dark': order.status === 'In Progress',
            'bg-danger': order.status === 'Cancelled'
          }"
        >
          {{ order.status }}
        </span>
      </div>
      <div class="col-md-4 mb-3 text-md-end">
        <p class="mb-1"><strong>Total:</strong></p>
        <h5 class="mb-0">
          {{ order.total | currency : "BGN" : "symbol" : "1.2-2" }}
        </h5>
      </div>
    </div>
  </div>

  <div class="card mb-4 shadow-sm border-0">
    <div class="card-header bg-light">
      <h5 class="mb-0"><i class="bi bi-geo-alt me-2"></i>Delivery address</h5>
    </div>
    <div class="card-body">
      <p class="mb-1">{{ order.address.name }}</p>
      <p class="mb-1">{{ order.address.streetAddress }}</p>
      <p class="mb-1">{{ order.address.zipCode }} {{ order.address.city }}</p>
    </div>
  </div>

  <div class="row row-cols-1 row-cols-md-2 align-items-stretch">
    <ng-container *ngFor="let item of order.items">
      <div class="col mb-5">
        <app-order-detail-card [item]="item"></app-order-detail-card>
      </div>
    </ng-container>
  </div>
</div>

<div class="container my-5 text-center" *ngIf="loading">
  <div class="spinner-border" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>
<div class="container my-5" *ngIf="error">
  <div class="alert alert-danger">{{ error }}</div>
</div>
